<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>  Ù…Ù† Ø¹Ø¯Ù† Ø¥Ù„Ù‰ Ø§Ù„Ø®Ø¨Ø±</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Traditional Arabic', 'Times New Roman', serif;
            background: #ffffff;
            color: #333;
            height: 100vh;
            overflow: hidden;
        }
        
        .container {
            position: relative;
            width: 100%;
            height: 100%;
        }
        
        #map {
            width: 100%;
            height: 100vh;
        }
        
        .controls {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.95);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border: 1px solid #ddd;
            max-width: 280px;
        }
        
        .controls h2 {
            color: #2c3e50;
            margin-bottom: 15px;
            text-align: center;
            font-size: 20px;
            border-bottom: 1px solid #eee;
            padding-bottom: 8px;
        }
        
        .btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px 0;
            font-family: inherit;
            transition: all 0.3s ease;
            width: 100%;
        }
        
        .btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }
        
        .btn.reset {
            background: #7f8c8d;
        }
        
        .btn.reset:hover {
            background: #636e72;
        }
        
        .status {
            display: flex;
            align-items: center;
            margin-top: 10px;
            font-size: 13px;
            justify-content: center;
            color: #666;
        }
        
        .pulse {
            width: 10px;
            height: 10px;
            background: #e74c3c;
            border-radius: 50%;
            margin-left: 8px;
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.3); opacity: 0.7; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .message-card {
            position: absolute;
            right: 20px;
            bottom: 20px;
            background: rgba(255, 255, 255, 0.98);
            padding: 20px;
            border-radius: 10px;
            max-width: 350px;
            border: 1px solid #ddd;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
            transform: translateY(20px);
            opacity: 0;
            transition: all 0.5s ease;
            z-index: 1000;
        }
        
        .message-card.show {
            transform: translateY(0);
            opacity: 1;
        }
        
        .message-card h2 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 18px;
            text-align: center;
        }
        
        .message-card p {
            font-size: 16px;
            line-height: 1.5;
            text-align: center;
            color: #444;
        }
        
        .custom-marker {
            background: #e74c3c;
            border: 2px solid white;
            border-radius: 50%;
            width: 16px;
            height: 16px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .custom-marker.start {
            background: #e74c3c;
        }
        
        .custom-marker.end {
            background: #27ae60;
            width: 18px;
            height: 18px;
        }
        
        .plane-icon {
            background: #3498db;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
            transform: rotate(45deg);
        }
        
        .plane-icon::before {
            content: "âœˆ";
            transform: rotate(-45deg);
            color: white;
            font-size: 12px;
        }
        
        .path-line {
            stroke-dasharray: 10;
            animation: dash 1s linear infinite;
        }
        
        @keyframes dash {
            to {
                stroke-dashoffset: -20;
            }
        }
        
        @media (max-width: 768px) {
            .controls {
                left: 10px;
                top: 10px;
                padding: 10px;
                max-width: 220px;
            }
            
            .message-card {
                right: 10px;
                left: 10px;
                max-width: none;
                bottom: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="map"></div>
        
        <div class="controls">
            <h2>Ù…Ù† Ø¹Ø¯Ù† Ø¥Ù„Ù‰ Ø§Ù„Ø®Ø¨Ø±</h2>
            <div>
                <button class="btn" id="sendBtn">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© âœˆï¸</button>
                <button class="btn reset" id="resetBtn">Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†</button>
            </div>
            <div class="status">
                <span class="pulse"></span>
                <span>Ø§ØªØµØ§Ù„ Ù…Ø¨Ø§Ø´Ø± Ù…Ù† Ø¹Ø¯Ù† ğŸ‡¾ğŸ‡ª</span>
            </div>
        </div>
        
        <div class="message-card" id="messageCard">
            <h2>ğŸ“¬ ØªÙ… ØªØ³Ù„ÙŠÙ… Ø§Ù„Ø±Ø³Ø§Ù„Ø©!</h2>
            <p> ÙˆØ¹ÙˆÙˆÙˆÙˆÙˆÙˆÙˆÙˆÙ‡ Ù„Ùƒ ÙˆØ­Ø´Ù‡ ÙŠØ§Ù…Ù„Ùƒ</p>
            <p style="margin-top: 10px; color: #2c3e50; font-size: 14px;">Ø¹Ù…Ùˆ Ø®Ø§Ù„Ùˆ Ø¬Ø¯Ùˆ Ø¨ÙŠÙ†Ù†Ø§ Ø¨ÙƒØ±Ù‡ Ø§Ù„Ø§Ù† Ù‚Ø¯Ù‡ ÙˆÙ‚Øª Ù…Ø§Ø¹Ø¯ Ø´ÙŠ ÙˆÙ‚Øª</p>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø¹Ø¯Ù† ÙˆØ§Ù„Ø®Ø¨Ø±
        const aden = [12.7855, 45.0187];
        const khobar = [26.2172, 50.1971];
        
        // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø®Ø±ÙŠØ·Ø©
        const map = L.map('map', {
            zoomControl: true
        }).setView([19, 47.5], 5);
        
        // Ø¥Ø¶Ø§ÙØ© Ø·Ø¨Ù‚Ø© Ø§Ù„Ø®Ø±ÙŠØ·Ø©
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: 'Â© OpenStreetMap contributors',
            maxZoom: 18
        }).addTo(map);
        
        // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¹Ù„Ø§Ù…Ø§Øª Ø§Ù„Ù…Ø®ØµØµØ©
        const startIcon = L.divIcon({
            className: 'custom-marker start',
            iconSize: [16, 16],
        });
        
        const endIcon = L.divIcon({
            className: 'custom-marker end',
            iconSize: [18, 18],
        });
        
        // Ø¥Ù†Ø´Ø§Ø¡ Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø·Ø§Ø¦Ø±Ø©
        const planeIcon = L.divIcon({
            className: 'plane-icon',
            iconSize: [24, 24],
            iconAnchor: [12, 12]
        });
        
        // Ø¥Ø¶Ø§ÙØ© Ø¹Ù„Ø§Ù…Ø§Øª Ø§Ù„Ù…Ø¯Ù†
        const adenMarker = L.marker(aden, {icon: startIcon})
            .addTo(map)
            .bindPopup('<b>Ø¹Ø¯Ù† ğŸ‡¾ğŸ‡ª</b><br>Ù†Ù‚Ø·Ø© Ø§Ù„Ø§Ù†Ø·Ù„Ø§Ù‚');
            
        const khobarMarker = L.marker(khobar, {icon: endIcon})
            .addTo(map)
            .bindPopup('<b>Ø§Ù„Ø®Ø¨Ø± ğŸ‡¸ğŸ‡¦</b><br>Ù†Ù‚Ø·Ø© Ø§Ù„ÙˆØµÙˆÙ„');
        
        // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³Ø§Ø±
        const pathCoordinates = [aden, khobar];
        const path = L.polyline(pathCoordinates, {
            color: '#3498db',
            weight: 3,
            opacity: 0.7,
            dashArray: '10, 10',
            className: 'path-line'
        }).addTo(map);
        
        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø·Ø§Ø¦Ø±Ø©
        const plane = L.marker(aden, {
            icon: planeIcon
        }).addTo(map);
        
        // Ø¹Ù†Ø§ØµØ± Ø§Ù„ØµÙØ­Ø©
        const sendBtn = document.getElementById('sendBtn');
        const resetBtn = document.getElementById('resetBtn');
        const messageCard = document.getElementById('messageCard');
        
        // Ø¯Ø§Ù„Ø© ØªØ­Ø±ÙŠÙƒ Ø§Ù„Ø·Ø§Ø¦Ø±Ø©
        function animatePlane() {
            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø·Ø§Ø¦Ø±Ø© Ø¥Ù„Ù‰ Ù†Ù‚Ø·Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©
            plane.setLatLng(aden);
            
            // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
            messageCard.classList.remove('show');
            
            // ØªÙƒØ¨ÙŠØ± Ø§Ù„Ø®Ø±ÙŠØ·Ø©
            map.setView(aden, 7, {
                animate: true,
                duration: 1
            });
            
            // Ø¨Ø¯Ø¡ ØªØ­Ø±ÙŠÙƒ Ø§Ù„Ø·Ø§Ø¦Ø±Ø© Ø¨Ø¹Ø¯ ØªØ£Ø®ÙŠØ± Ø¨Ø³ÙŠØ·
            setTimeout(() => {
                const startTime = Date.now();
                const duration = 6000; // 6 Ø«ÙˆØ§Ù†ÙŠ
                
                function updatePlane() {
                    const elapsed = Date.now() - startTime;
                    const progress = Math.min(elapsed / duration, 1);
                    
                    // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…ÙˆØ¶Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ
                    const currentLat = aden[0] + (khobar[0] - aden[0]) * progress;
                    const currentLng = aden[1] + (khobar[1] - aden[1]) * progress;
                    const currentPos = [currentLat, currentLng];
                    
                    // ØªØ­Ø¯ÙŠØ« Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø·Ø§Ø¦Ø±Ø©
                    plane.setLatLng(currentPos);
                    
                    // ØªØ¯ÙˆÙŠØ± Ø§Ù„Ø·Ø§Ø¦Ø±Ø© Ø­Ø³Ø¨ Ø§Ù„Ø§ØªØ¬Ø§Ù‡
                    const rotation = 45 + (progress * 180);
                    plane.getElement().style.transform = `rotate(${rotation}deg)`;
                    
                    // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„Ø®Ø±ÙŠØ·Ø© ØªØ¯Ø±ÙŠØ¬ÙŠÙ‹Ø§
                    if (progress < 0.7) {
                        map.setView(currentPos, 7, {
                            animate: true,
                            duration: 0.5
                        });
                    } else {
                        map.setView(currentPos, 10, {
                            animate: true,
                            duration: 1
                        });
                    }
                    
                    // Ø¥Ø°Ø§ Ù„Ù… ØªÙ†ØªÙ‡ Ø§Ù„Ø­Ø±ÙƒØ© Ø¨Ø¹Ø¯ØŒ Ø§Ø³ØªÙ…Ø±
                    if (progress < 1) {
                        requestAnimationFrame(updatePlane);
                    } else {
                        // Ø¹Ù†Ø¯ Ø§Ù„ÙˆØµÙˆÙ„
                        setTimeout(() => {
                            messageCard.classList.add('show');
                            khobarMarker.openPopup();
                            
                            // ØªØ£Ø«ÙŠØ± Ø¨Ø³ÙŠØ· Ù„Ù„Ø±Ø³Ø§Ù„Ø©
                            messageCard.style.transform = 'translateY(0) scale(1.02)';
                            setTimeout(() => {
                                messageCard.style.transform = 'translateY(0) scale(1)';
                            }, 200);
                        }, 500);
                    }
                }
                
                // Ø¨Ø¯Ø¡ Ø§Ù„Ø­Ø±ÙƒØ©
                updatePlane();
            }, 500);
        }
        
        // Ø¯Ø§Ù„Ø© Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ†
        function resetAnimation() {
            plane.setLatLng(aden);
            plane.getElement().style.transform = 'rotate(45deg)';
            messageCard.classList.remove('show');
            map.setView([19, 47.5], 5, {
                animate: true,
                duration: 1
            });
            adenMarker.openPopup();
        }
        
        // Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
        sendBtn.addEventListener('click', animatePlane);
        resetBtn.addEventListener('click', resetAnimation);
        
        // Ø¹Ø±Ø¶ Ù†Ø§ÙØ°Ø© Ø¹Ø¯Ù† Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
        setTimeout(() => {
            adenMarker.openPopup();
        }, 1000);
    </script>
</body>
</html>